Centralised openiBoot repo for the iDroid Project
---------------------------------------------------
1. Compiling
2. Installing
3. Adding Zephyr Firmware

1. Compiling
---------------------------------------------------
Build an ARM toolchain (only needs to be done once):
	Run, as root: toolchain/build-toolchain.sh make
	
Wait, for a long time, as the toolchain is compiled.

Compile OpeniBoot:
To run openiboot from the recovery mode (a.k.a iboot), you’ll need to create an img3 image.

Build: (A system capable of running x86 Linux binaries is required. If compiling on 64-bit linux, you may need libc6-dev-i386 and type export ARCH=x86_64 before you proceed with the next steps.)

For iPod touch, run:
PLATFORM=IPOD make openiboot.img3

For iPhone 2G, run:
PLATFORM=IPHONE make openiboot.img3

For iPhone 3G, run:
PLATFORM=3G make openiboot.img3

Compile all in client/ :
cd client && make all && cd ..
(requires libusb, libreadline and pthread)

2. Installing
---------------------------------------------------
Put your phone into recovery mode (hold home whilst powering on until you see the iTunes logo)

Run: sudo client/loadibec openiboot.img3

You should now see openiBoot on your phone, use the volume buttons to scroll to the console icon, then press home

Run the client (If you are on a mac, you will most likely need to do this as soon as you have selected the console - Linux does not manifest this issue):
sudo client/oibc

You should now see the same output on your computer, as is on your phone's screen.

Back up your NOR:
Type “nor_read 0×09000000 0×0 1048576” (Without quotes) Wait for it to finish.

Now type “~norbackup.dump:1048576” (Without quotes) This will dump the NOR to the same directory your running this from.

Once this is complete, you are ready to install.

Type: install

This will take a while, but will flash openiBoot to your phone.

3. Adding zephyr firmware
--------------------------------------------------
We are unable to distribute the multi-touch firmware for legal reasons, so you will need to collect it from your iOS installation (See the 'Ninn's Extraction Technique post on http://www.idroidproject.org/wiki)

Once you have your firmware, we need to prepare it and install it to your phones NOR:

Convert your multitouch firmware to .img3 file format (see Makefile)

Example for 3G:
mk8900image zephyr2.bin zephyr2.img3 template-3g.img3

Example for 2G:
mk8900image zephyr_aspeed.bin zephyr_aspeed.img3 template.img3
mk8900image zephyr_main.bin zephyr_main.img3 template.img3

Change the img3 image id at offset 0×10 to 0×13 using your favourite hex editor.

Default id is written as cebi (ibec), so you replace with this value:

For zephyr2 use 2ztm
For zephyr_aspeed use aztm
For zephyr_main use mztm

Load the img3 file using oibc (!template.img3)

Write it to your NOR.

For 3G using ‘multitouch_fw_install fwAddress fwlength’
For 2G using ‘multitouch_fw_install aspeedfwAddress aspeedfwlength mainfwAddress mainfwlength’